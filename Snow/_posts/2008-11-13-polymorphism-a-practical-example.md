---
layout: post
title: Polymorphism – A Practical Example
date: 2008-11-13 19:01
author: fekberg
comments: true
metadescription: Polymorphism
categories: C/C++, Programming
tags: C/C++, programming architecture
---
<p>Classes, inheritance and polymorphism can sometimes be somewhat hard to understand. So a practial example suits many well. Therefore this will be a tutorial where i will touch the areas of classes, pointers, inheritance and polymorphism.</p><!--excerpt-->  <p>So to just clearify some expressions i will add a little dictionary at the top:</p>  <p><strong>Class     <br /></strong>A class can somewhat be seen as a blueprint of your object. I.e. having a blueprint for a building, then this would be the class. Then a Constructor would build this to become an actuall touchable object.</p>  <p><strong>Inheritance     <br /></strong>When you inherit something you can think of it more like you extend this thing. I.e. having a Car and then having a Sports Car where there are some new variables to it. The Sports Car is actually a Car but it’s also extended with new properties.</p>  <p><strong>Polymorphism     <br /></strong>This is taken from Wikipedia: <em>“In simple terms, polymorphism is the ability of one type, A, to appear as and be used like another type, B. In strongly typed languages, this usually means that type A somehow derives from type B, or type A implements an interface that represents type B”. </em><a href="http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming">Read more here</a></p>  <p><strong>Pointer     <br /></strong>For a pointer explenation <a href="http://fekberg.wordpress.com/2008/11/11/pointers-double-pointers/">look here</a></p>  <p>I will be using Visual Studio 2008 with the built in C++ compiler for the following examples.</p>  <p>A good practice will be to create a Bank, when you get a new assignment or just want to create something new, start by thinking about the structure, what actuall needs does this have? Well when creating a Bank i think to myself that i’d like to be able to create Bank Accounts, attatch these to People and you can go on and on.</p>  <p>But, for the example i will only go as far as creating a Bank, a Bank Account ( Abstract ) and a Student Bank account which is the only Bank account you can actually get.</p>  <p>So creating a simple diagram over the project, i got something like this:<a href="http://fekberg.files.wordpress.com/2008/11/diagram.jpg"><img title="diagram" style="border-right:0;border-top:0;display:block;float:none;margin-left:auto;border-left:0;margin-right:auto;border-bottom:0;" height="268" alt="diagram" src="http://fekberg.files.wordpress.com/2008/11/diagram-thumb.jpg" width="358" border="0" /></a> So now we have a Bank, Account and Student Account, what kind of variables do we need?</p>  <p><strong>Bank     <br /></strong>Bank Name    <br />Accounts</p>  <p><strong>Account     <br /></strong>Balance    <br />Interest    <br />Max Loan    <br />Account Holder</p>  <p><strong>Student Account     <br /></strong>Amount of Deposits    <br />Last Deposite Month</p>  <p>So the big difference between Account and Student Account is that the Student Account have different rules than Account and therefore calculate a lot of things differently. We won’t go through all the logics. There will of course be a window for you to evolve this application as you feel nessesary.</p>  <p>Now when we have a defined structure we can start by creating a new Project and it’s files. My project will be called Bank and the following files will be placed in it:</p>  <ol>   <li>main.cpp</li>    <li>Bank.h</li>    <li>Bank.cpp</li>    <li>BankAccount.h</li>    <li>BankAccount.cpp</li>    <li>StudentAccount.h</li>    <li>StudentAccount.cpp</li> </ol>  <p>When all my files are created a start by definint my program entry point, this being my main. <strong><em>Notice that i will be posting code snippets as pictures, because you should Write this yourself and not copy my code!</em></strong></p>  <p><a href="http://fekberg.files.wordpress.com/2008/11/1.jpg"><img title="1" style="border-right:0;border-top:0;display:inline;border-left:0;border-bottom:0;" height="132" alt="1" src="http://fekberg.files.wordpress.com/2008/11/1-thumb.jpg" width="188" border="0" /></a> </p>  <p></p>  <p>We prepare for an input/output stream by including &lt;iostream&gt; and setting using namespace std;</p>  <p>Now the next part is to define the Bank.h We need an appropriet constructor, desctructor and some access methods, remember to never open up member variables publicly!</p>  <p>The #ifndef part is important for the compiler, we dont want to define our header file more than once, because that is not nessesary!</p>  <p><a href="http://fekberg.files.wordpress.com/2008/11/2.jpg"><img title="2" style="border-right:0;border-top:0;display:inline;border-left:0;border-bottom:0;" height="376" alt="2" src="http://fekberg.files.wordpress.com/2008/11/2-thumb.jpg" width="439" border="0" /></a> </p>  <p>I assume all the parts are clear except the last one, read more about how that pointer type works in the previous post here on my wordpress.</p>  <p>The implementation itself will be up to you, i will only be showing the structure, header-files and some code from main and where polymorphism is concerned!</p>  <p>The next file to create would be the BankAccount, remember to add #include “BankAccount.h”&#160; to Bank.h when it has been done. Otherwise the BankAccount *accounts array will fail because undefined symbol.</p>  <p>Back to the third file, the BankAccount.h this is how i would structure it:</p>  <p><a href="http://fekberg.files.wordpress.com/2008/11/3.jpg"><img title="3" style="border-right:0;border-top:0;display:inline;border-left:0;border-bottom:0;" height="437" alt="3" src="http://fekberg.files.wordpress.com/2008/11/3-thumb.jpg" width="466" border="0" /></a> </p>  <p>The part to look deeply on here is the Deposite method, watch closely, it’s defined as followed: virtual void Deposite(double amount) = 0; So this method is expected to be overrided in a inherited class and it has the return type of void and an in parameter of the type double.</p>  <p>Now the next file to create is the StudentAccount.h where we will be deriving from BankAccount.</p>  <p><a href="http://fekberg.files.wordpress.com/2008/11/4.jpg"><img title="4" style="border-right:0;border-top:0;display:inline;border-left:0;border-bottom:0;" height="356" alt="4" src="http://fekberg.files.wordpress.com/2008/11/4-thumb.jpg" width="466" border="0" /></a> </p>  <p>So the following class StudentAccount is extending a class called BankAccount. So this means that StudentAccount is a BankAccount with extended properties and/or overrided functions.</p>  <p>Now, look closely again, here we have the virtual void Deposite part again, but without the =0, so this means we will be creating a definition for this function.</p>  <p>Also the Amount of Deposits and Last Deposit Month is just there to simulate some properties that might be nessesary to do something on a student accont. In my case this is for the Deposite. A Student Can’t deposite money more than three times per month, this is because a student gets 2% interest everytime they deposite money.</p>  <p>This is my Constructor for StudentAccount</p>  <p><a href="http://fekberg.files.wordpress.com/2008/11/5.jpg"><img title="5" style="border-right:0;border-top:0;display:inline;border-left:0;border-bottom:0;" height="145" alt="5" src="http://fekberg.files.wordpress.com/2008/11/5-thumb.jpg" width="425" border="0" /></a> </p>  <p>As you can see, we pass the Variables Owner and Deposite back to the constructor of the base type, being BankAccount.</p>  <p>Now this is how my Deposite Method is implemented:</p>  <p><a href="http://fekberg.files.wordpress.com/2008/11/6.jpg"><img title="6" style="border-right:0;border-top:0;display:inline;border-left:0;border-bottom:0;" height="410" alt="6" src="http://fekberg.files.wordpress.com/2008/11/6-thumb.jpg" width="400" border="0" /></a>&#160;</p>  <p>Now the last think i want you to look at, is my final Main:</p>  <p><a href="http://fekberg.files.wordpress.com/2008/11/7.jpg"><img title="7" style="border-right:0;border-top:0;display:inline;border-left:0;border-bottom:0;" height="430" alt="7" src="http://fekberg.files.wordpress.com/2008/11/7-thumb.jpg" wi

dth="450" border="0" /></a> </p>  <p></p>  <p>I want you to try and create all the nessesary functions in Bank.cpp, BankAccount.cpp and in StudentAccount.ccp to get the following output from this Main.cpp:</p>  <p><a href="http://fekberg.files.wordpress.com/2008/11/8.jpg"><img title="8" style="border-right:0;border-top:0;display:inline;border-left:0;border-bottom:0;" height="333" alt="8" src="http://fekberg.files.wordpress.com/2008/11/8-thumb.jpg" width="437" border="0" /></a> ‘</p>  <p>I would happily answer any questions about this project.</p>
